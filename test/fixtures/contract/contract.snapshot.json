{
  "name": "zcl",
  "version": "0.0.0-dev",
  "artifactLayoutVersion": 1,
  "traceSchemaVersion": 1,
  "artifacts": [
    {
      "id": "run.json",
      "kind": "json",
      "schemaVersions": [
        1
      ],
      "required": true,
      "pathPattern": ".zcl/runs/<runId>/run.json",
      "requiredFields": [
        "schemaVersion",
        "runId",
        "suiteId",
        "createdAt"
      ]
    },
    {
      "id": "suite.json",
      "kind": "json",
      "schemaVersions": [
        1
      ],
      "required": false,
      "pathPattern": ".zcl/runs/<runId>/suite.json",
      "requiredFields": []
    },
    {
      "id": "attempt.json",
      "kind": "json",
      "schemaVersions": [
        1
      ],
      "required": true,
      "pathPattern": ".zcl/runs/<runId>/attempts/<attemptId>/attempt.json",
      "requiredFields": [
        "schemaVersion",
        "runId",
        "suiteId",
        "missionId",
        "attemptId",
        "mode",
        "startedAt"
      ]
    },
    {
      "id": "prompt.txt",
      "kind": "text",
      "schemaVersions": [
        1
      ],
      "required": false,
      "pathPattern": ".zcl/runs/<runId>/attempts/<attemptId>/prompt.txt",
      "requiredFields": []
    },
    {
      "id": "feedback.json",
      "kind": "json",
      "schemaVersions": [
        1
      ],
      "required": true,
      "pathPattern": ".zcl/runs/<runId>/attempts/<attemptId>/feedback.json",
      "requiredFields": [
        "schemaVersion",
        "runId",
        "suiteId",
        "missionId",
        "attemptId",
        "ok",
        "createdAt"
      ]
    },
    {
      "id": "attempt.report.json",
      "kind": "json",
      "schemaVersions": [
        1
      ],
      "required": false,
      "pathPattern": ".zcl/runs/<runId>/attempts/<attemptId>/attempt.report.json",
      "requiredFields": [
        "schemaVersion",
        "runId",
        "suiteId",
        "missionId",
        "attemptId",
        "computedAt",
        "metrics"
      ]
    }
  ],
  "events": [
    {
      "stream": "tool.calls.jsonl",
      "schemaVersions": [
        1
      ],
      "requiredFields": [
        "v",
        "ts",
        "runId",
        "missionId",
        "attemptId",
        "tool",
        "op",
        "result",
        "io"
      ]
    },
    {
      "stream": "notes.jsonl",
      "schemaVersions": [
        1
      ],
      "requiredFields": [
        "v",
        "ts",
        "runId",
        "missionId",
        "attemptId",
        "kind"
      ]
    }
  ],
  "commands": [
    {
      "id": "init",
      "usage": "zcl init [--out-root .zcl] [--config zcl.config.json] [--json]",
      "summary": "Initialize the project output root and write the minimal project config."
    },
    {
      "id": "feedback",
      "usage": "zcl feedback --ok|--fail --result <string>|--result-json <json>",
      "summary": "Write the canonical attempt outcome to feedback.json (primary evidence)."
    },
    {
      "id": "note",
      "usage": "zcl note [--kind agent|operator|system] --message <string>|--data-json <json>",
      "summary": "Append a bounded/redacted note event to notes.jsonl (secondary evidence)."
    },
    {
      "id": "report",
      "usage": "zcl report [--strict] [--json] <attemptDir|runDir>",
      "summary": "Compute attempt.report.json from tool.calls.jsonl + feedback.json."
    },
    {
      "id": "run",
      "usage": "zcl run -- <cmd> [args...]",
      "summary": "Run a command through the ZCL CLI funnel (passthrough stdout/stderr, bounded capture for traces)."
    },
    {
      "id": "contract",
      "usage": "zcl contract --json",
      "summary": "Print the ZCL surface contract (artifact layout + supported schema versions)."
    },
    {
      "id": "attempt start",
      "usage": "zcl attempt start --suite <suiteId> --mission <missionId> [--prompt <text>] [--suite-file <path>] --json",
      "summary": "Allocate a run/attempt directory and print canonical IDs + env for the spawned agent."
    }
  ],
  "errors": [
    {
      "code": "ZCL_E_USAGE",
      "summary": "Invalid CLI usage (missing/invalid flags).",
      "retryable": false
    },
    {
      "code": "ZCL_E_IO",
      "summary": "Filesystem I/O error while writing artifacts.",
      "retryable": true
    }
  ]
}
